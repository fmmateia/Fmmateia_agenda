async function carregarAgenda() {
  try {
    const res = await fetch("/api/agenda", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({})
    });

    const dados = await res.json(); // <-- aqui estava o erro

    const container = document.getElementById("agenda");
    container.innerHTML = "";

    dados.forEach(item => {
      const div = document.createElement("div");
      div.className = `slot ${item.status === 'ocupado' ? 'busy' : 'free'}`;
      div.innerHTML = `
        <div class="label">${item.data} · ${item.inicio} – ${item.fim}</div>
        <div class="status">${item.status === 'ocupado' ? 'Ocupado' : 'Disponível'}</div>
      `;
      container.appendChild(div);
    });
  } catch (e) {
    document.getElementById("erro").innerText = "Erro ao carregar disponibilidade.";
  }
}
  carregarAgenda();
  </script>

