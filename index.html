<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agenda Fábio</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #calendar-container {
      width: 100%;
      max-width: 400px;
      margin-bottom: 20px;
    }
    #calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    #month-year {
      font-size: 1.25rem;
      font-weight: bold;
    }
    #calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }
    .day-name, .day {
      text-align: center;
      padding: 10px 0;
    }
    .day-name {
      font-weight: bold;
      background-color: #f0f0f0;
    }
    .day {
      border: 1px solid #ccc;
      cursor: pointer;
    }
    .day.disabled {
      background-color: #f9f9f9;
      cursor: default;
      color: #aaa;
    }
    .day:hover:not(.disabled) {
      background-color: #e0e0e0;
    }
    #slots-container {
      width: 100%;
      max-width: 400px;
    }
    #slots {
      border: 1px solid #ccc;
      padding: 10px;
      min-height: 100px;
    }
    .slot {
      margin: 5px 0;
    }
    .slot button {
      margin-left: 10px;
      padding: 5px 10px;
    }
  </style>
</head>
<body>
  <h1>Agenda Fábio</h1>
  <div id="calendar-container">
    <div id="calendar-header">
      <button id="prev-month" disabled>&lt;</button>
      <div id="month-year"></div>
      <button id="next-month">&gt;</button>
    </div>
    <div id="calendar">
      <!-- Dias da semana -->
      <div class="day-name">Dom</div>
      <div class="day-name">Seg</div>
      <div class="day-name">Ter</div>
      <div class="day-name">Qua</div>
      <div class="day-name">Qui</div>
      <div class="day-name">Sex</div>
      <div class="day-name">Sáb</div>
      <!-- Dias do mês serão inseridos aqui via JavaScript -->
    </div>
  </div>
  <div id="slots-container">
    <h2>Horários Disponíveis</h2>
    <div id="slots">
      <p>Selecione um dia no calendário para ver os horários disponíveis.</p>
    </div>
  </div>

  <script>
    // Função para formatar o nome do mês em português
    const meses = [
      'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
      'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
    ];
    
    let hoje = new Date();
    let mesAtual = hoje.getMonth();
    let anoAtual = hoje.getFullYear();

    function criarCalendario(mes, ano) {
      const calendarEl = document.getElementById('calendar');
      calendarEl.querySelectorAll('.day.month-day').forEach(el => el.remove());

      document.getElementById('month-year').textContent = `${meses[mes]} ${ano}`;

      const primeiroDia = new Date(ano, mes, 1).getDay();
      const diasNoMes = new Date(ano, mes + 1, 0).getDate();

      // Adicionar dias vazios antes do primeiro dia
      for (let i = 0; i < primeiroDia; i++) {
        const emptyEl = document.createElement('div');
        emptyEl.classList.add('day', 'disabled', 'month-day');
        calendarEl.appendChild(emptyEl);
      }

      // Adicionar dias do mês
      for (let dia = 1; dia <= diasNoMes; dia++) {
        const diaEl = document.createElement('div');
        diaEl.textContent = dia;
        diaEl.classList.add('day', 'month-day');

        const dataClick = new Date(ano, mes, dia);
        // Desabilitar dias anteriores a hoje
        if (dataClick < new Date(hoje.getFullYear(), hoje.getMonth(), hoje.getDate())) {
          diaEl.classList.add('disabled');
        } else {
          diaEl.addEventListener('click', () => mostrarSlots(dia, mes, ano));
        }

        calendarEl.appendChild(diaEl);
      }
    }

    function mostrarSlots(dia, mes, ano) {
      const slotsEl = document.getElementById('slots');
      slotsEl.innerHTML = '';

      const dataSelecionada = `${dia}/${mes + 1}/${ano}`;
      const titulo = document.createElement('p');
      titulo.textContent = `Horários para ${dataSelecionada}`;
      slotsEl.appendChild(titulo);

      // Exemplo de horários fixos; em produção, buscar do servidor via API
      const horarios = [
        '09:00', '10:00', '11:00', '14:00', '15:00', '16:00'
      ];

      horarios.forEach(horario => {
        const slotEl = document.createElement('div');
        slotEl.classList.add('slot');
        slotEl.textContent = horario;

        const btnMarcar = document.createElement('button');
        btnMarcar.textContent = 'Agendar';
        btnMarcar.addEventListener('click', () => {
          // Lógica de agendamento: enviar para servidor ou abrir modal para confirmação
          alert(`Agendado em ${dataSelecionada} às ${horario}`);
        });

        slotEl.appendChild(btnMarcar);
        slotsEl.appendChild(slotEl);
      });
    }

    function mudarMes(delta) {
      mesAtual += delta;
      if (mesAtual < 0) {
        mesAtual = 11;
        anoAtual--;
      } else if (mesAtual > 11) {
        mesAtual = 0;
        anoAtual++;
      }
      criarCalendario(mesAtual, anoAtual);
    }

    document.getElementById('next-month').addEventListener('click', () => mudarMes(1));
    document.getElementById('prev-month').addEventListener('click', () => mudarMes(-1));

    // Inicializa calendário no mês atual
    criarCalendario(mesAtual, anoAtual);
  </script>
</body>
</html>

